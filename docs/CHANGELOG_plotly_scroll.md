# Changelog - PlotlyGraph 스크롤 기능

## 📅 2025-12-04

### ✨ 새로운 기능

#### 1. PlotlyGraph 가로/세로 스크롤 지원
- 엑셀 데이터 분석의 모든 그래프 타입에 스크롤 기능 추가
- x축 데이터 포인트가 많을 때 자동으로 차트 너비 확장
- 세련된 커스텀 스크롤바 스타일링

#### 2. 동적 차트 너비 자동 계산
- **Bar Graph**: 카테고리당 60px 할당
- **Line Graph**: 포인트당 40px 할당  
- **Box Plot**: 박스당 80px 할당
- 최소 너비: 800px 보장

### 🔧 수정된 파일

#### `/src/components/PlotlyGraph.vue`
**변경사항:**
- 스크롤 래퍼(`plotly-scroll-wrapper`) 추가
- `responsive: false` 설정으로 고정 크기 활성화
- 커스텀 스크롤바 CSS 추가

**영향:**
- 모든 PlotlyGraph 인스턴스에 스크롤 기능 적용
- 기존 차트와 완전히 호환
- 작은 데이터셋에서는 스크롤 없이 정상 동작

#### `/src/App.vue`
**변경사항:**
- `buildBarFigure()`: x축 카테고리 수 기반 너비 계산
- `buildLineFigure()`: x축 포인트 수 기반 너비 계산
- `buildBoxFigure()`: 박스 수 기반 너비 계산

**영향:**
- 데이터가 많을 때 자동으로 차트 확장
- 각 데이터 포인트가 충분한 공간 확보
- 라벨 겹침 문제 해결

### 📚 새로운 문서

#### `/docs/plotly_scroll_feature.md`
- 스크롤 기능 상세 설명
- 동작 원리 및 구현 방법
- 테스트 시나리오 및 권장사항
- 커스터마이징 가이드

### 📝 업데이트된 문서

#### `/docs/excel_analysis_response_formats.md`
- Chart Size & Margins 섹션에 width 자동 계산 설명 추가
- 스크롤 동작 방식 설명

#### `/docs/llm_prompts_for_plotly_spec_generation.md`
- 모든 그래프 타입 프롬프트에 width 관련 주의사항 추가
- LLM이 width를 지정하지 않도록 가이드

### 🎯 개선 효과

#### Before
```
❌ x축 50개 → 라벨 겹침 → 읽기 불가능
❌ 모든 데이터를 800px에 우겨넣음
❌ 긴 라벨 잘림
```

#### After
```
✅ x축 50개 → 차트 3000px → 스크롤로 명확하게 확인
✅ 각 카테고리당 60px 공간 확보
✅ 라벨 전체 표시
✅ 부드러운 스크롤 UX
```

### 📊 성능 영향

- **긍정적 영향:**
  - 차트 가독성 크게 향상
  - 대용량 데이터 시각화 가능
  - 사용자 경험 개선

- **주의사항:**
  - 매우 큰 데이터셋(1000개+)에서는 성능 저하 가능
  - 권장: 백엔드에서 적절한 필터링/집계

### 🔄 하위 호환성

- ✅ **완전 호환**: 기존 코드 변경 불필요
- ✅ 작은 데이터셋에서는 기존과 동일하게 동작
- ✅ 기존 `height` prop 정상 작동
- ✅ 백엔드 API 변경 불필요

### 🧪 테스트 완료

- [x] 데이터 10개 미만 - 스크롤 없음 (정상)
- [x] 데이터 20-50개 - 자동 너비 확장 (정상)
- [x] 데이터 100개+ - 스크롤 동작 (정상)
- [x] 긴 x축 라벨 - 각도 조절 + 스크롤 (정상)
- [x] 기존 커스터마이징 유지 (정상)

### 📖 사용 방법

백엔드에서 아무것도 할 필요 없음! 자동으로 적용됩니다.

**선택사항: 특정 너비 강제 지정**
```python
graph_spec = {
    "layout": {
        "width": 1500,  # 자동 계산 대신 1500px 고정
        # ...
    }
}
```

### 🔗 관련 이슈

- 문제: x축 라벨이 많을 때 겹쳐서 읽기 어려움
- 해결: 동적 너비 + 스크롤
- 사용자 요청: "가로세로 스크롤 가능하게 해주세요"

### 👥 영향 받는 사용자

- ✅ 엑셀 파일 업로드 후 차트 생성하는 모든 사용자
- ✅ x축 카테고리가 많은 데이터 분석하는 사용자
- ✅ 시계열 데이터 트렌드 보는 사용자

### 🚀 향후 개선 계획

1. **반응형 개선**
   - 모바일에서 자동 너비 축소
   - 화면 크기별 최적 너비

2. **UX 개선**
   - "전체보기" 버튼 추가 (옵션)
   - 미니맵 표시 (큰 차트용)

3. **성능 최적화**
   - 가상 스크롤 (1000개+ 데이터)
   - 지연 렌더링

---

## 📞 문의

문제 발견 시:
1. 브라우저 콘솔 확인
2. 차트 데이터 개수 확인
3. `graph_spec.layout.width` 값 확인
